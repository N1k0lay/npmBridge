# Product Context

## Зачем существует этот проект

Корпоративные разработчики работают в изолированных сетях (air-gapped) без прямого доступа к npm-registry. Для установки зависимостей проектов нужен промежуточный способ доставки пакетов в такую среду.

## Проблемы, которые решает

1. **Нет прямого интернета** — разработчики в корп. сети не могут обратно к npmjs.org
2. **Ручная доставка ненадёжна** — копировать пакеты "руками" трудоёмко и ошибочно
3. **Несколько изолированных сетей** — нужно отслеживать, что и куда перенесено
4. **Поддержание актуальности** — пакеты обновляются, нужен инструментарий для инкрементальных переносов

## Как это работает

### Типичный workflow

```
1. Devs используют npm/pnpm с registry=http://verdaccio:4873
   → пакеты кешируются в storage/

2. Периодически (или вручную):
   → запускается обновление пакетов до latest (скрипты Python)
   → все версии подтягиваются и сохраняются в storage/

3. Создаётся diff:
   → сравнивается storage/ vs frozen/
   → формируется tar.gz архив с новыми/изменёнными файлами
   → архив доступен для скачивания

4. Архив скачивается и переносится в корп. сеть
   (флешка, шлюз, другие методы физического переноса)

5. В интерфейсе отмечается: "для сети X перенесено ✓"
   → при первом подтверждении frozen/ синхронизируется со storage/
   → следующий diff будет считать от нового базового состояния
```

### Поддержка множества сетей

Если организация имеет несколько изолированных площадок:
- Каждая сеть — это именованная метка (например: "Основная", "Резервная", "Площадка-А")
- Для каждого diff хранится информация: в какие сети уже перенесён
- Архив diff не удаляется, пока хотя бы одна сеть не отметила перенос
- Сеть может "отстать" на несколько diff — архивы сохраняются

## Цели UX

- **Единый интерфейс** — всё в одном месте через браузер
- **Прозрачность** — видно что происходит (прогресс, логи, история)
- **Простота** — минимум действий для типового сценария
- **Надёжность** — нельзя потерять пакеты из-за UI-ошибки

## Вкладки интерфейса

| Вкладка | Назначение |
|---------|-----------|
| **Обновление** | Запуск обновления, настройки, история запусков |
| **Diff** | Создание архива изменений, скачивание, подтверждение переноса |
| **Проверка** | Поиск и исправление битых `.tgz` архивов |
| **Storage** | Браузер пакетов (дерево, версии, размеры) |
| **История пакетов** | Хронология появления пакетов по времени |
| **Сети** | Управление корпоративными сетями |
